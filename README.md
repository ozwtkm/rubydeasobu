# Ruby Quest Monsters Ultra Light

## 概要
「Ruby Quest Monsters Ultra Light」という**自作ソーシャルゲームのプログラム**、ならびに、そのアプリケーションを動作させる**自作フレームワーク**(MVC/諸々のライブラリ。簡易Railsをイメージ)です。

以下機能があります。(2020年2月現在。随時アップデート中)
- 会員登録
- ログイン
- パーティ編集
- クエスト(ダンジョンを徘徊 → 敵とバトル/アイテム取得/ダンジョン脱出/中断)
- モンスター取得ガチャ
- モンスター合成
- チャット
- ログイン(管理者)
- ダンジョン作成(管理者)

## 動作確認
以下で動作しています。
会員登録等、自由に実施下さい。  
http://rqmul.wfm.jp/rsc/index.html


## テーマ
「作者がゲーム開発(サーバサイド)の基礎を学ぶ」


## コンセプト
- コーディングに当たり考慮しているもの
    - MVC設計
    - RESTful
    - DB設計
    - DB負荷(クエリ数の削減等に努める)
    - コードの簡潔さ
    - セキュリティ
        - 入力値検証
        - 整合性検証
            - 仕様外操作の試行に対する検証
            - DB間の整合性検証(SQL←→mongoにまたがる処理での一貫性保障等)
        - 排他制御

- 考慮していないもの
    - ゲームとしての面白さ
    - クライアント(便宜的にブラウザから操作できるようhtmlとjsも置いているがこれは飾り。)
    - アプリケーションの外側のセキュリティ
        - HTTPS未使用
        - 外部ライブラリの脆弱性 etc..


## アーキテクチャ
- Webサーバ → nginx
- チャットサーバ → websocket.rb
- アプリケーションサーバ → server.rb
- ドキュメント指向DBサーバ → MongoDB
- RDBサーバ → MySQL
- キャッシュサーバ → Memcache
- CIサーバ(gitへ定期ポーリングして自動ビルド、単体テスト) → Jenkins


## ブランチの説明
- master
    - 本番環境。  
      「rqmul.wfm.jp」で動作しているアプリはこのブランチ。
- develop
    - 試験環境。  
      localhostのみアクセス許可しているため、アクセスにはEC2インスタンス(rqmul.wfm.jp)にssh -L等でポートフォワードする必要あり。
- ugokanai
    - 手元で作ったものをとりあえず保存しておく用。基本的に最新状態。