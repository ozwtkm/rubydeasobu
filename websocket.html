<html>
<head><meta charset="UTF-8" />
<title>websocket</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script> 

<script>
  function init() {
  
    function debug(string) {
      var element = document.getElementById("debug");
      var p = document.createElement("p");
      p.appendChild(document.createTextNode(string));
      element.appendChild(p);
    }
	
    var Socket = WebSocket;
    var ws = new Socket("ws://192.168.119.128:81/unko/");
	
    ws.onclose = function(event) {
      debug("Closed - code: " + event.code + ", reason: " + event.reason + ", wasClean: " + event.wasClean);
    };
	
    ws.onopen = function() {
      debug("connected...");
    };
	
	ws.onmessage = function(event){
      var message_li = $('<li>').text(event.data);
      $("#msg-area").append(message_li);
    };
	
	$("#send").on('click', function(){
      ws.send($('#message').val());
    });
	
  };
  
  function logout() {
	ws.close();
  }
  
  
</script>

</head>

<body onload="init();">

<div id="debug"></div>

<input type="text" id="message" />
<input type="button" id="send" value="send"/><br>
<input type="button" value="退出" onclick="logout()">
<ul id="msg-area" />

</body>

</html>
